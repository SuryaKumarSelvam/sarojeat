class BarracudaSlideshow{constructor(element,time=500){this.debug=!1,element?(this.slideshow=element,typeof Swipe<"u"&&new Swipe(this.slideshow),this.data=element.dataset,this.classList=element.classList,this.time=time,this.init()):console.error("BarracudaSlideshow: Construct must contains element!")}init(){this.slideshow.classList.contains("testimonials")&&setTimeout(()=>{this.setTestimonialsHeight(),window.addEventListener("resize",this.setTestimonialsHeight.bind(this))},10),this.controls(),this.current={int:this.data.start?parseInt(this.data.start):1,element:this.slideshow.querySelector(".barracuda-slideshow-slide:nth-child("+(this.data.start?this.data.start:1)+")")},this.current.element&&(this.current.element.classList.add("current"),this.defineColors(this.current.element),this.refreshControls(this.current.int)),this.length=parseInt(this.slideshow.querySelectorAll(".barracuda-slideshow-slide").length),this.lock=!1,this.autoplay=this.data.autoplay?this.data.autoplay:!1,this.timeout=null,this.autoplay&&this.start(),this.slideshow.addEventListener("swipe",this.swipe.bind(this)),this.classList.add("barracuda-slideshow-initialized")}setTestimonialsHeight(){var x=0;this.slideshow.querySelectorAll(".slide-content .text-frame>div").forEach(el=>{el.scrollHeight>x&&(x=el.scrollHeight)}),x+this.slideshow.querySelector(".barracuda-slideshow-controls").scrollHeight,this.controls.hidden?this.slideshow.style.height="calc("+x+"px)":this.slideshow.style.height="calc(48px + "+x+"px)"}swipe(e){if(e.detail&&e.detail.direction)switch(e.detail.direction){case"left":this.prev();break;case"right":this.next();break;default:break}}prev(useAnimation=!0){var temp=this.slideshow.querySelector(".barracuda-slideshow-slide:nth-child("+(this.current.int-1)+")");if(temp)var prev={int:this.current.int-1,element:temp};else var prev={int:this.length,element:this.slideshow.querySelector(".barracuda-slideshow-slide:nth-child("+this.length+")")};this.setPosition(prev,useAnimation)}next(useAnimation=!0){var temp=this.slideshow.querySelector(".barracuda-slideshow-slide:nth-child("+(this.current.int+1)+")");if(temp)var next={int:this.current.int+1,element:temp};else var next={int:1,element:this.slideshow.querySelector(".barracuda-slideshow-slide:nth-child(1)")};this.setPosition(next,useAnimation)}set(index,useAnimation=!0){index=parseInt(index);var temp=this.slideshow.querySelector(".barracuda-slideshow-slide:nth-child("+index+")");temp?(this.autoplay&&this.stopAutoplay(),this.autoplay=!1,this.setPosition({int:index,element:temp},useAnimation)):console.error("BarracudaGallery: Slide with index "+index+"doesn't exists")}setPosition(to,useAnimation=!0){if(this.lock)console.warn("BarracudaGallery: Too fast, slideshow is locked.",to.int);else if(this.current.int!=to.int){this.lock=!0,this.stop(),this.refreshControls(to.int);var after=function(){this.current=to,this.autoplay&&this.start(),this.lock=!1}.bind(this);useAnimation?(to.element.classList.add("before-current"),this.current.element.classList.add("after-current"),setTimeout(()=>{this.defineColors(to.element),to.element.classList.add("pre-current"),setTimeout(()=>{to.element.classList.add("current"),to.element.classList.remove("before-current","pre-current"),this.current.element.classList.remove("current","after-current"),after()},this.time)},1)):(this.defineColors(to.element),to.element.classList.add("current"),this.current.element.classList.remove("current"),after())}}start(){this.autoplay=this.data.autoplay?this.data.autoplay:!1,this.slideshow.classList.add("slideshow-playing"),this.slideshow.classList.remove("slideshow-stopped"),this.timeout=setTimeout(this.next.bind(this),this.autoplay)}stop(){clearTimeout(this.timeout)}stopAutoplay(){this.slideshow.classList.contains("slideshow-playing")&&(this.slideshow.classList.add("slideshow-stopped"),this.slideshow.classList.remove("slideshow-playing")),this.stop()}defineColors(targetElement){this.data.disablecolors||(targetElement.classList.contains("inverted")?(this.slideshow.parentElement.classList.add("use-inverted-colors"),this.slideshow.classList.add("use-inverted-colors"),this.slideshow.offsetTop==0&&document.querySelector("body").classList.add("use-inverted-colors")):(this.slideshow.parentElement.classList.remove("use-inverted-colors"),this.slideshow.classList.remove("use-inverted-colors"),this.slideshow.offsetTop==0&&document.querySelector("body").classList.remove("use-inverted-colors")),Barracuda.elements.Overlapping&&Barracuda.elements.Overlapping.check())}controls(){this.controls={element:this.slideshow.querySelector(".barracuda-slideshow-controls"),dots:this.slideshow.querySelector(".barracuda-slideshow-controls-dots"),dotTemplate:this.slideshow.querySelector(".barracuda-slideshow-controls-dot"),playIcon:this.slideshow.querySelector(".barracuda-slideshow-controls-play"),pauseIcon:this.slideshow.querySelector(".barracuda-slideshow-controls-pause"),hidden:!1},this.controls.dots.innerHTML="",this.controls.playIcon&&this.controls.pauseIcon&&(this.controls.dots.appendChild(this.controls.playIcon),this.controls.playIcon.addEventListener("click",this.start.bind(this)),this.controls.dots.appendChild(this.controls.pauseIcon),this.controls.pauseIcon.addEventListener("click",this.stopAutoplay.bind(this))),this.slideshow.querySelectorAll(".barracuda-slideshow-slide").forEach((element,index)=>{var temp=this.controls.dotTemplate.cloneNode();temp.addEventListener("click",(()=>{this.set(index+1),this.stop()}).bind(this)),this.controls.dots.appendChild(temp)}),this.slideshow.querySelectorAll(".barracuda-slideshow-slide").length<=1&&(this.controls.dots.classList.add("hide"),this.controls.element&&this.controls.element.childElementCount<=1&&this.controls.element.querySelector(".barracuda-slideshow-controls-dots")&&(this.controls.element.classList.add("hide"),this.controls.hidden=!0))}refreshControls(position=1){this.slideshow.querySelector(".barracuda-slideshow-controls-dot.active")&&this.slideshow.querySelector(".barracuda-slideshow-controls-dot.active").classList.remove("active"),this.data.autoplay?this.slideshow.querySelector(".barracuda-slideshow-controls-dot:nth-of-type("+(2+position)+")")&&this.slideshow.querySelector(".barracuda-slideshow-controls-dot:nth-of-type("+(2+position)+")").classList.add("active"):this.slideshow.querySelector(".barracuda-slideshow-controls-dot:nth-of-type("+position+")")&&this.slideshow.querySelector(".barracuda-slideshow-controls-dot:nth-of-type("+position+")").classList.add("active");function dotsVisibility(dots2,from=null,to=null){if(dots2.length>0){if(dots2.forEach(dot=>{dot.classList.remove("end"),dot.classList.add("visible")}),from){for(let i=0;i<from;i++)dots2[i]&&dots2[i].classList.remove("visible");dots2[from]&&dots2[from].classList.add("end")}if(to){for(let i=to;i<dots2.length;i++)dots2[i]&&dots2[i].classList.remove("visible");dots2[to-1]&&to!=dots2.length&&dots2[to-1].classList.add("end")}}}var dots=this.slideshow.querySelectorAll(".barracuda-slideshow-controls-dot"),visibleDots=5,dotsCount=dots.length;this.length<=visibleDots?dotsVisibility(dots):position<3?dotsVisibility(dots,null,visibleDots):position+2>this.length?dotsVisibility(dots,dotsCount-visibleDots,null):dotsVisibility(dots,position-3,position+2)}}
//# sourceMappingURL=/cdn/shop/t/16/assets/barracuda-slideshow.js.map?v=155605279052471922891723552344
