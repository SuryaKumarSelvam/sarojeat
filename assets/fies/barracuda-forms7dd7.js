class BarracudaCount{constructor(element){this.element=element,this.element.classList.add("use-barracuda-count-initialized"),this.container=document.createElement("DIV"),this.container.classList.add("barracuda-count"),this.element.parentElement.insertBefore(this.container,this.element),this.element.remove(),this.container.appendChild(this.element),this.debouncer=null;var minus=document.createElement("DIV");this.container.insertBefore(minus,this.element),minus.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-minus-circle"><line x1="8" y1="12" x2="16" y2="12"></line></svg>',minus.addEventListener("click",this.minus.bind(this));var plus=document.createElement("DIV");this.container.appendChild(plus),plus.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-plus-circle"><line x1="12" y1="8" x2="12" y2="16"></line><line x1="8" y1="12" x2="16" y2="12"></line></svg>',plus.addEventListener("click",this.plus.bind(this))}plus(){this.element.value=!this.element.dataset.max&&parseInt(this.element.dataset.max)<=parseInt(this.element.value)?this.element.dataset.max:parseInt(this.element.value)+1,this.trigger()}minus(){this.element.value=parseInt(this.element.value)<=0?0:parseInt(this.element.value)-1,this.trigger()}trigger(debouncer=!1){if(!debouncer)clearTimeout(this.debouncer),this.debouncer=setTimeout((()=>{this.trigger(!0)}).bind(this),400);else{var event=new Event("change",{bubbles:!0,cancelable:!0});this.element.dispatchEvent(event)}}}class BarracudaProduct{constructor(element){this.element=element,this.element.classList.add("barracuda-product-initialized"),this.parentEl=this.element.closest(".product-part"),this.debug=!1,this.element&&this.init()}init(){this.productVariants={},this.element.querySelectorAll(".variant-data-source").forEach(element=>{var variant_id=element.dataset.id;this.productVariants[variant_id]={},element.querySelectorAll("span").forEach(el=>{this.productVariants[variant_id][el.dataset.mapas]=el.innerText})}),console.log(this.productVariants,"this.productVariants");var x=this.element.querySelector("select[name=id] option[selected]");this.selectedOptions={1:x.dataset.option1,2:x.dataset.option2,3:x.dataset.option3},this.parentEl.querySelectorAll(".picker-selector").forEach(el=>{el.addEventListener("click",(e=>{e.preventDefault,this.setPicker(el)}).bind(this)),el.addEventListener("keypress",(e=>{e.key==="Enter"&&this.setPicker(el)}).bind(this))}),this.parentEl.querySelectorAll(".option-selector").forEach(el=>{el.addEventListener("change",(()=>{this.optionChange(el.dataset.position,el.value)}).bind(this),!1)}),this.parentEl.querySelector(".barracuda-select select[name=selling_plan]")&&this.parentEl.querySelector(".barracuda-select select[name=selling_plan]").addEventListener("change",(()=>{var el=this.element.querySelector("select[name=selling_plan]");if(el=this.element.querySelectorAll("select[name=selling_plan] option")[el.selectedIndex],el)if(el.value=="")for(var i=1;i<=3;i++){var optionSelect=this.element.querySelector("select[name=option"+i+"]");optionSelect&&(optionSelect.disabled=!1,optionSelect.parentElement.classList.remove("disabled"))}else{var opt=[];opt[1]=el.dataset.option1,opt[2]=el.dataset.option2,opt[3]=el.dataset.option3;for(var i=1;i<=3;i++){var optionSelect=this.parentEl.querySelector("select[name=option"+i+"]");optionSelect&&(optionSelect.value=opt[i],optionSelect.disabled=!0,optionSelect.parentElement.classList.add("disabled"))}var selector="select[name=id] option.option1-"+opt[1]+".option2-"+opt[2]+".option3-"+opt[3],selectedOption=this.element.querySelector(selector),selectedVariantId=selectedOption.value;if(history.replaceState){var newUrl="".concat(window.location.protocol,"//").concat(window.location.host).concat(window.location.pathname,"?variant=").concat(selectedVariantId);window.history.replaceState({path:newUrl},"",newUrl)}this.element.querySelector("select[name=id]").querySelector("[selected]").removeAttribute("selected"),this.element.querySelector("select[name=id]").querySelector('[value="'.concat(selectedVariantId,'"]')).setAttribute("selected","selected"),this.element.querySelector("select[name=id]").dispatchEvent(new Event("change",{bubbles:!0}))}}).bind(this),!1)}setPicker(picker){let bPicker=picker.closest(".barracuda-picker"),pickerSelector=bPicker?bPicker.querySelector("select"):!1,pickerSelectedValueLabel=bPicker?bPicker.querySelector(".selected-value"):!1;bPicker&&pickerSelector&&(bPicker.querySelectorAll(".button").forEach(el=>{el.classList.add("outline-button")}),bPicker.querySelectorAll(".picker-selector").forEach(el=>{el.classList.remove("selected")}),picker.classList.add("selected"),picker.classList.contains("button")&&picker.classList.remove("outline-button"),pickerSelectedValueLabel&&(pickerSelectedValueLabel.innerText=picker.dataset.label),pickerSelector.value=picker.dataset.value,pickerSelector.dispatchEvent(new Event("change",{bubbles:!0})))}optionChange(position,value){this.selectedOptions[position]=value;var selector='select[name="id"] option.option1-'+this.selectedOptions[1]+".option2-"+this.selectedOptions[2]+".option3-"+this.selectedOptions[3],selectedVariantId=this.element.querySelector('select[name="id"] option.option1-'+this.selectedOptions[1]+".option2-"+this.selectedOptions[2]+".option3-"+this.selectedOptions[3]);if(selectedVariantId){if(selectedVariantId=selectedVariantId.value,history.replaceState){var newUrl="".concat(window.location.protocol,"//").concat(window.location.host).concat(window.location.pathname,"?variant=").concat(selectedVariantId);window.history.replaceState({path:newUrl},"",newUrl)}if(this.element.querySelector("select[name=id]").querySelector("[selected]").removeAttribute("selected"),this.element.querySelector("select[name=id]").querySelector('[value="'.concat(selectedVariantId,'"]')).setAttribute("selected","selected"),this.element.querySelector("select[name=id]").dispatchEvent(new Event("change",{bubbles:!0})),this.parentEl.querySelector(".barracuda-gallery-v2")){var galleryId=this.parentEl.querySelector(".barracuda-gallery-v2").id;galleryId&&Barracuda.elements.GalleryObjectsV2[galleryId]&&Barracuda.elements.GalleryObjectsV2[galleryId].show(".media-"+this.productVariants[selectedVariantId].variant_media)}this.parentEl.querySelectorAll(".variant-data").forEach(el=>{if(document.querySelectorAll(".bundle-item").length!=0){let finalPrice=parseInt(this.productVariants[selectedVariantId].price_without_formatting),finalCPrice=this.productVariants[selectedVariantId].compare_at_price_without_formatting!=null?parseInt(this.productVariants[selectedVariantId].compare_at_price_without_formatting):0;return document.querySelector(".product-price")&&(document.querySelector(".product-price").setAttribute("data-main-price",finalPrice),document.querySelector(".product-price").setAttribute("data-main-compareprice",finalCPrice)),el.dataset.map=="price"&&(el.innerHTML=Shopify.formatMoney(finalPrice).replaceAll(".00","")),el.dataset.map=="compare_at_price"&&(el.innerText=Shopify.formatMoney(finalCPrice).replaceAll(".00","")),!1}el.innerText=this.productVariants[selectedVariantId][el.dataset.map]}),this.parentEl.querySelector(".cant-add-more")&&this.parentEl.querySelector(".cant-add-more").classList.add("visually-hidden"),this.parentEl.querySelectorAll(".check-availability").forEach(el=>{el.querySelector("span.availability-dot").remove(),el.innerHTML=el.innerHTML+'<span class="availability-dot '+this.productVariants[selectedVariantId].availability+'-dot"></span>',el.dataset.url=this.productVariants[selectedVariantId].variant_url});var button=this.element.querySelector(".barracuda-cart-addToCartButton"),dynamicButtons=this.element.querySelector(".dynamic-buy");button&&this.productVariants[selectedVariantId].hamper_option=="true"?button.classList.add("disabled"):button&&this.productVariants[selectedVariantId].available=="true"?(button.classList.remove("disabled"),dynamicButtons&&dynamicButtons.classList.remove("hidden")):button&&this.productVariants[selectedVariantId].available=="false"?(button.classList.add("disabled"),dynamicButtons&&dynamicButtons.classList.add("hidden")):console.warn("Add to Cart button not found")}else{var button=this.element.querySelector(".barracuda-cart-addToCartButton"),dynamicButtons=this.element.querySelector(".dynamic-buy");button&&(button.classList.add("disabled"),button.innerText=button.dataset.unavailable),dynamicButtons&&dynamicButtons.classList.add("hidden")}}}class BarracudaAjaxForm{constructor(form,button=null){form.classList.add("use-barracuda-ajax-form-initialized"),this.debug=!0,this.form=form,this.message=null,this.button=button||(form.querySelector("input[type=submit], button[type=submit]")?form.querySelector("input[type=submit], button[type=submit]"):!1),this.button||console.error("BarracudaAjaxForm: button not found",form),this.button&&this.button.addEventListener("click",this.send.bind(this))}send(event){event.preventDefault(),this.form.classList.add("loading"),axios({method:"post",url:this.form.action,data:new FormData(this.form),headers:{"Content-Type":"multipart/form-data"}}).then(function(response){var x=document.createElement("html");x.innerHTML=response.data,console.log(x),x.querySelector(".shopify-challenge__container, #g-recaptcha")?this.form.submit():x.querySelector("#page-content .ajax-form-success")?(this.form.dataset.renew&&x.querySelector("#"+this.form.dataset.renew)&&document.getElementById(this.form.dataset.renew)&&document.getElementById(this.form.dataset.renew).replaceWith(x.querySelector("#"+this.form.dataset.renew)),this.success(x.querySelector("#page-content .ajax-form-success"))):x.querySelector("#page-content .ajax-form-failure")?this.failure(x.querySelector("#page-content .ajax-form-failure")):this.button.dataset.redirect?window.location=this.button.dataset.redirect:this.form.action?window.location.href=this.form.action:this.form.submit()}.bind(this)).catch(function(error){console.error(error),this.form.submit()}.bind(this))}success(success=null){success&&(this.message=success,this.form.appendChild(this.message),this.message.addEventListener("click",this.erase.bind(this)),this.form.classList.add("form-success")),this.form.classList.remove("loading")}failure(error=null){error?this.message=error:(this.message=document.createElement("div"),this.message.classList.add("ajax-form-failure"),this.message.innerHTML="<span>Connection failed</span>"),this.form.appendChild(this.message),this.message.addEventListener("click",this.hide.bind(this)),this.form.classList.add("form-failure"),this.form.classList.remove("loading")}hide(){this.form.classList.remove("form-success"),this.form.classList.remove("form-failure"),this.message&&(this.message.removeEventListener("click",this.hide.bind(this)),this.message.remove())}erase(){this.form.reset(),this.hide()}}
//# sourceMappingURL=/cdn/shop/t/16/assets/barracuda-forms.js.map?v=9532634025199794311727839628
